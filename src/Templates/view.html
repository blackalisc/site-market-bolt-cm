{% extends "layout.html" %}


{% block header_title %} | {{package.title}}{% endblock %}

{% block content %}
    <div class="ui grid stackable">
        <div class="eight wide column">     
            <h2 class="ui header">
                <img class="ui rounded image" src="{{packageIcon(package)}}">
                <div class="content">
                    {{package.title}}
                    <div class="sub header">by {{package.authors}}</div>
                </div>
            </h2>
            <!-- <div>Last Update: 13/08/2015</div> -->
        </div>
        <div class="right floated right aligned eight wide column">

            <div class="buttons_header">
                {% if boltthemes and boltthemes.active %}
                    <a class="ui orange button" href="{{ boltthemes.preview_page }}">View Live Preview</a>
                {% endif %}
                <button class="ui toggle button" id="copy-button" data-content="{{ package.name }}" data-title="Click to copy the package name" data-clipboard-text="{{ package.name }}"><i class="alternate copy icon"></i> Copy to clipboard</button>
                <button class="ui green button">FREE</button>
            </div>

            <div class="ui right floated main menu">
                <a class="bug popup icon item" data-content="Downloads" href="#">
                    <i class="download icon"> {{package.downloads|default(0)}}</i>
                </a>

                <a class="bug popup icon item" {% if request.get('isLoggedIn') %}{% if package.isStarredBy(request.get('user')) %}{% else %}href="{{url('star',{'package':package.id})}}"{% endif %}{% endif %} data-content="{% if request.get('isLoggedIn') %}{% if package.isStarredBy(request.get('user')) %}You have starred this package.{% else %}Star this package !{% endif %}{% else %}You must be login to star packages.{% endif %}">
                    <i class="star icon"> {{package.stars|default(0)}}</i>
                </a>

                <a class="github popup icon item" data-content="View source code" target="_blank" href="{{package.source}}">
                    {% if "github.com" in package.source %}
                        <i class="alternate github icon"></i>
                    {% else %}
                        <i class="alternate code icon"></i>
                    {% endif %}
                </a>
            </div>
        </div>
    </div>

    <br>


    {% if package.screenshots %}
        <h2 class="ui left floated header">Screenshots</h2>
        <div class="ui clearing divider"></div>
        <div class="slide_gallery scrollbar-inner">
            <div class="gallery" id="scroll_gallery">
                {% for image in package.screenshots%}
                    {% if "//" in image %}
                        <img class="image_gallery" src="{{image}}">                    
                    {% else %} 
                        <img class="image_gallery" src="{{package.source|replace({ ('github.com'): 'raw.githubusercontent.com'})}}/master/{{image}}">
                    {% endif %}
                {% endfor %}
            </div>

        </div>
        <br>
    {% endif %}

    <div class="ui grid stackable">

        <div class="ten wide column">
            <h2 class="ui left floated header">Description</h2>
            <div class="ui clearing divider"></div>
            <p style="font-size: 110%;">{{package.description}}</p>
        </div>

        <div class="six wide column">
            <h2 class="ui left floated header">More Info</h2>
            <div class="ui clearing divider"></div>

            <div class="ui relaxed large divided list">
                <div class="item">
                    <i class="large file code outline middle aligned icon"></i>
                    <div class="content">
                        <a class="header">Created</a>
                        <div class="description">{{package.created.date|date('jS M Y')}}</div>
                    </div>
                </div>
                <div class="item">
                    <i class="large flag outline middle aligned icon"></i>
                    <div class="content">
                        <a class="header">Latest Version</a>
                        <div class="description">{{package.versions[0]}}</div>
                    </div>
                </div>

                <div class="item">
                    <i class="large history middle aligned icon"></i>
                    <div class="content">
                        <a class="header">Last Update</a>
                        <div class="description">
                            {% for version in versions.stable |slice(0,1) %}
                                {{ version.time|date('jS F Y') }}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="item">
                    <i class="large folder outline middle aligned icon"></i>
                    <div class="content">
                        <a class="header">Category</a>
                        <div class="description">
                            {% if "bolt-extension" == package.type %}
                            Plugin
                            {% else %}
                            Theme
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="item">
                    <i class="large tags middle aligned icon"></i>
                    <div class="content">
                        <a class="header">Tags</a>
                        <div class="description">
                            {% for tag in package.keywords %}
                                <a href="{{url('browse')}}?q={{tag}}"><span class="label tags">{{tag}}</span></a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="sixteen wide column">
            <h2 class="ui left floated header">Changelog &amp; Releases</h2>
            <div class="ui clearing divider"></div>
            

            <div class="ui accordion styled fluid gbody">
                {% for version in versions.stable %}
                    <div class="title">
                        <i class="dropdown icon"></i>{{version.version}} Released: {{ version.time|date('jS F Y') }}
                    </div> 
                    <div class="content">
                        {% if version.release.body %}
                            <pre>{{ version.release.body }}</pre>
                        {% else %}
                            <p><strong>No release information available</strong></p>
                            <p><a href="{{version.support.source}}">View source code</a> for this release</p>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>



        <div class="ten wide column">
            <h2 class="ui left floated header">Comments</h2>
            <div class="ui clearing divider"></div>
            {% include '_disqus_comments.html' %}
        </div>

        <div class="six wide column">
            <h2 class="ui left floated header">Related</h2>
            <div class="ui clearing divider"></div>

            <div class="ui relaxed large divided vertical list related_list">
                {% for related in package.account.packages |slice(0, 7) %}
                    {% if related != package %}
                        <div class="item">
                            <img class="ui avatar image" src="/images/{{ related.type }}.png">
                            <div class="content">
                                <a class="header" href="{{url('view',{'package':related.id})}}">{{related.title}}</a>
                                {{related.name}}
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>

    </div>


{% endblock %}

{% block header_extra_scripts %}
<script src="/js/jquery.scrollbar.min.js"></script>
<script src="//cdn.jsdelivr.net/zeroclipboard/2.2.0/ZeroClipboard.min.js"></script>
<script src="/js/extension-extras.js"></script>
{% endblock %}
